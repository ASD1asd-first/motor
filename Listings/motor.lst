C51 COMPILER V9.54   MOTOR                                                                 09/11/2025 15:57:40 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MOTOR
OBJECT MODULE PLACED IN .\Objects\motor.obj
COMPILER INVOKED BY: D:\Keil5\C51\BIN\C51.EXE motor.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\motor
                    -.lst) OBJECT(.\Objects\motor.obj)

line level    source

   1          #include <REGX52.H>
   2          
   3          sbit a_for = P2^0;
   4          sbit a_bak = P2^1;
   5          sbit b_for = P2^2;
   6          sbit b_bak = P2^3;
   7          
   8          static void a_forward(void){
   9   1              a_for = 1;
  10   1              a_bak = 0;
  11   1      }
  12          
  13          static void a_back(void){
  14   1              a_for = 0;
  15   1              a_bak = 1;
  16   1      }
  17          
  18          static void b_forward(void){
  19   1              b_for = 1;
  20   1              b_bak = 0;
  21   1      }
  22          
  23          static void b_back(void){
  24   1              b_for = 0;
  25   1              b_bak = 1;
  26   1      }
  27          
  28          static void stop(void){
  29   1              a_for = 0;
  30   1              a_bak = 0;
  31   1              b_for = 0;
  32   1              b_bak = 0;
  33   1      }
  34          /**
  35                  @function:步进电机正转,
  36                  @param choose: 表示步进电机正转节拍数
  37                  本步进电机采用八拍控制方式,从零开始计次
  38          */
  39          void Motor_Forwarding(unsigned char choose){
  40   1              switch(choose){
  41   2                      case 0: stop(); b_back(); a_forward(); break;      
  42   2                      case 1: stop(); a_forward(); break;     
  43   2                      case 2: stop(); a_forward(); b_forward(); break;    
  44   2                      case 3: stop(); b_forward(); break;       
  45   2                      case 4: stop(); b_forward(); a_back(); break;       
  46   2                      case 5: stop(); a_back(); break;    
  47   2                      case 6: stop(); a_back(); b_back(); break;    
  48   2                      case 7: stop(); b_back(); break;       
  49   2              }
  50   1      }
  51          
  52          /**
  53                  @function:步进电机反转,
  54                  @param choose: 表示步进电机反转节拍数
C51 COMPILER V9.54   MOTOR                                                                 09/11/2025 15:57:40 PAGE 2   

  55                  本步进电机采用八拍控制方式,从零开始计次
  56          */
  57          void Motor_Backing(unsigned char choose){
  58   1              switch(choose){
  59   2                      case 7: stop(); b_back(); a_forward(); break;      
  60   2                      case 6: stop(); a_forward(); break;     
  61   2                      case 5: stop(); a_forward(); b_forward(); break;    
  62   2                      case 4: stop(); b_forward(); break;       
  63   2                      case 3: stop(); b_forward(); a_back(); break;       
  64   2                      case 2: stop(); a_back(); break;    
  65   2                      case 1: stop(); a_back(); b_back(); break;    
  66   2                      case 0: stop(); b_back(); break;       
  67   2              }
  68   1      }
  69          /**
  70          *       @function: 赋予步进电机初始状态
  71          *                       初始状态为B相电流倒流
  72          */
  73          void Motor_Init(){
  74   1              b_back();
  75   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    220    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
